<% layout('/layout/boilerplate') -%>
<style>

    body {
    background-color: #f8f9fa;
    font-family: Arial, sans-serif;
}

.listing-title {
    font-weight: 350;
    font-size: 2.5rem;
    color: #333;
    text-align: center;
}

.card {
    border-radius: 10px;
    overflow: hidden;
    background-color: white;
    margin-bottom: 20px;
}

.showImage {
    object-fit: cover;
    height: 300px;
}

.card-body {
    padding: 20px;
}

.card-text {
    border-top: 2pz solid black;
    color: #555;
    margin: 10px 0;
}

.owner-text {
    font-style: italic;
}

.price-text {
    font-size: 1.5rem;
    color: #28a745;
}

.description-text {
    font-size: 1rem;
    color: #666;
}

.btns{
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin: 2rem;
}
.contact{
    margin: 2rem;
}
.editImg{
    padding: 1rem;
    border: 0.4px solid rgb(155, 151, 151);
    border-bottom: none;
}
</style>
<body>
    <div class="row mt-4">
        <div class="col-8 offset-2">
            <h1 class="listing-title"><%= result.title %></h1>
        </div>
    </div>
    <div class="row">
        <div class="col-12 col-md-8 offset-md-2">
            <div class="card  ">
                <img class="card showImage editImg" src="<%= result.Image %>" alt="listing">
                <div class="card-body">
                    <p class="card-text owner-text"><b>Owner by:</b> <i>'<%= result.owner %>'</i></p>
                    <p class="card-text"><b>Title:</b><%= result.title %></p>
                    <p class="card-text description-text"><b>Description:</b><%= result.description %></p>
                    <p class="card-text"><b>Location:</b> <%= result.location %></p>
                    <p class="card-text price-text"><b>Price:</b>&#x20b9;<strong><%= result.price %></strong></p>
                    <p class="card-text"><b>Country:</b> <%= result.country %></p>
                </div>
               <% if(currentUser && currentUser._id.equals(result.ownerId)) { %>
                <div class="btns">
                   <a href="/listing/<%= result._id %>/edit"><button class="btn btn-dark ml-9" style="width: 5rem;">Edit</button></a>
                   <a href="/listing/<%= result._id %>/delete"> <button class="btn btn btn-danger ml-9" style="width: 5rem;">Delete</button></a>
                </div>
                <% } %>
            </div>
        </div>
    </div>
    <%# REVIEW %>
    <div class="col-6 offset-3">
        <hr>
        <form action="/listing/<%= result._id %>/review" method="post">
            <h2>REVIEW'S</h2>
            <div class="row">
                <textarea  cols="20" rows="8" class="form-control mt-3 mb-3" name="Review[message]" placeholder="Message" required></textarea>
                <button class="btn btn-dark mb-3 col-2">Submit</button>
            </div>
        </form>
    </div>
    <div class="row  offset-3">
        <p><b>ALL REVIEW'S</b></p>
        <% for(review of result.reviews) { %>
            <div class="card sa col-4 ms-2 mb-2 ">
                <div class="card-body ">
                  <p class="card-text"><%= review.message %></p>
                  <form method="post" action="/listing/<%= result._id %>/review/<%=review._id %>?_method=DELETE">
                    <button class="btn sm  btn-dark  mb-3" style="background-color: black !important;">delete</button>
                  </form>
                </div>
            </div>
        <% } %>

    </div>
    <%# google map %>
    <div class="iFrame" style="margin-left: 23rem;">
        <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d3852.5104588583426!2d75.26287077503527!3d15.075169715281985!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2sin!4v1727342291402!5m2!1sen!2sin" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>        
    </div>
</body>







